{"ast":null,"code":"var _jsxFileName = \"/home/sobhan/Desktop/reacttest/src/fetching.js\";\nimport React from \"react\";\nimport Displaying from './displaying';\nimport Switching from './switching';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Fetching extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      actors: '',\n      sensors: '',\n      loading: true\n    };\n    this.handler = this.handler.bind(this);\n  }\n\n  async componentDidMount() {\n    const apiUrl1 = 'http://webswitch.ir:3000/actors';\n    const response = await fetch(apiUrl1);\n    const data1 = await response.json();\n    this.setState({\n      actors: data1.actors\n    });\n    const apiUrl2 = 'http://webswitch.ir:3000/sensors';\n    const response2 = await fetch(apiUrl2);\n    const data2 = await response2.json();\n    this.setState({\n      sensors: data2.sensors,\n      loading: false\n    });\n  }\n\n  handler(key, value) {\n    let k = key;\n    let f = this.state.actors[k - 1].actorstatus;\n    console.log(f, 'this is f');\n    console.log(k, 'this is k');\n    this.setState(() => ({\n      [this.state.actors[k - 1].actorstatus]: 1\n    }));\n    console.log(this.state.actors[k - 1]);\n    console.log(this.state.actors[k - 1].actorstatus, 'changed status');\n\n    if (this.state.actors[k - 1].actorid == 1) {\n      console.log('salam');\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"loading ....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this);\n    }\n\n    ;\n\n    if (this.state.sensors) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Percentage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.sensors.map((sensor, i) => /*#__PURE__*/_jsxDEV(Displaying, {\n              sensor: sensor\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 63\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Switch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.actors.map((actor, i) => /*#__PURE__*/_jsxDEV(Switching, {\n              actor: actor,\n              handler: this.handler\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 61\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this);\n    }\n\n    ;\n  }\n\n}","map":{"version":3,"sources":["/home/sobhan/Desktop/reacttest/src/fetching.js"],"names":["React","Displaying","Switching","Fetching","Component","constructor","props","state","actors","sensors","loading","handler","bind","componentDidMount","apiUrl1","response","fetch","data1","json","setState","apiUrl2","response2","data2","key","value","k","f","actorstatus","console","log","actorid","render","map","sensor","i","actor"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Displaying from './displaying'\nimport Switching from './switching'\n\nexport default class Fetching extends React.Component{\n    constructor(props){\n    super(props);\n    this.state={\n        actors:'',\n        sensors:'',\n        loading:true,\n    }\n    this.handler = this.handler.bind(this)\n\n}\n    async componentDidMount(){\n        const apiUrl1 = 'http://webswitch.ir:3000/actors';\n        const response = await fetch(apiUrl1);\n        const data1 = await response.json();\n        this.setState({actors:data1.actors})\n\n        const apiUrl2 = 'http://webswitch.ir:3000/sensors';\n        const response2 = await fetch(apiUrl2);\n        const data2 = await response2.json();\n        this.setState({sensors:data2.sensors,\n                     loading: false})\n    };\n    handler(key, value) {\n        let k = key\n        let f = this.state.actors[k-1].actorstatus\n        console.log(f , 'this is f')\n        console.log(k , 'this is k')\n        \n        \n\n        this.setState(()=>({\n          [this.state.actors[k-1].actorstatus]: 1\n        }))\n        console.log(this.state.actors[k-1])\n\n        console.log(this.state.actors[k-1].actorstatus, 'changed status')\n        if (this.state.actors[k-1].actorid==1){\n            console.log('salam')\n        }\n\n      }\n    render(){\n    if (this.state.loading){\n        return(\n            <h1>loading ....</h1>\n        )};\n    if (this.state.sensors) {\n        return(\n            <div>\n                <table className=\"table table-striped\">\n                <thead>\n                    <tr>\n                    <th scope=\"col\">#</th>\n                    <th scope=\"col\">Name</th>\n                    <th scope=\"col\">Percentage</th>\n                    </tr>\n                </thead>\n                <tbody>\n                        {this.state.sensors.map((sensor,i) => <Displaying key={i} sensor={sensor}/>)}\n                 </tbody>\n                 </table>\n                 <table className=\"table table-striped\">\n                <thead>\n                    <tr>\n                    <th scope=\"col\">#</th>\n                    <th scope=\"col\">Name</th>\n                    <th scope=\"col\">Switch</th>\n                    </tr>\n                </thead>\n                <tbody>\n                        {this.state.actors.map((actor,i) => <Switching key={i} actor={actor} handler={this.handler} />)}\n                 </tbody>\n                 </table>\n            </div>\n        )\n\n    };\n}\n}\n"]},"metadata":{},"sourceType":"module"}